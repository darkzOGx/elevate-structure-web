---
name: socal-engineering-blog
description: Generate SEO-optimized, geo-targeted engineering design blog posts for aaaengineeringdesign.com focused on Southern California cities. Use when user requests blog posts about structural engineering, civil engineering, MEP design, or engineering services with California/city-specific optimization. Includes comprehensive keyword strategy, interlinking rules, local SEO optimization, and AI Overview (AIO) optimization.
---

# SoCal Engineering Blog Generator

Generate high-quality, SEO-optimized blog posts for AAA Engineering Design targeting Southern California cities with proper keyword integration, internal linking, and local SEO optimization.

---

## ðŸš¨ MANDATORY FRAMEWORK - NO EXCEPTIONS ðŸš¨

**â›” STOP! Before generating ANY blog post, you MUST follow the HIGH-CONVERSION TARGETING FRAMEWORK below.**

**This is NOT optional. This is NOT a suggestion. This is the ONLY way to generate blog posts.**

| Rule | Requirement |
|------|-------------|
| **City Selection** | ONLY from Platinum/Gold/Growth tier lists below |
| **Keyword Selection** | MUST match city's archetype (Subterranean/Coastal/Compliance) |
| **Content Allocation** | 40% Platinum, 35% Gold, 25% Growth |
| **Generic Content** | âŒ PROHIBITED - No generic residential posts for random cities |
| **Old 103-City Rotation** | âŒ DEPRECATED - Do NOT use |

**If a blog post request doesn't specify high-conversion targeting, APPLY IT AUTOMATICALLY.**

---

## âš ï¸ HIGH-CONVERSION TARGETING FRAMEWORK (MANDATORY DEFAULT)

**Effective: December 2025**

This skill uses an **archetype-based, tiered market strategy** for maximum conversion and appointment setting. The old 103-city equal rotation is DEPRECATED and must NOT be used.

### âš¡ THREE MARKET ARCHETYPES (Match Content to Buyer Psychology)

| Archetype | Markets | Buyer Psychology | Fee Potential |
|-----------|---------|------------------|---------------|
| **SUBTERRANEAN & VERTICAL** | Atherton, Palo Alto, Beverly Hills, Manhattan Beach | Extreme land constraints â†’ build underground/up. Working with starchitects. | $25K-$150K+ |
| **COASTAL FORTIFICATION** | Malibu, Laguna Beach, Newport Beach, La Jolla, Montecito | Defending $3M-$30M+ coastal properties. Complex permitting. Fire/erosion damage. | $20K-$100K+ |
| **RESILIENCE & COMPLIANCE** | Santa Monica, West Hollywood, Pasadena, Long Beach | MANDATORY retrofit deadlines. Legal/financial pressure. Time-sensitive. | $15K-$75K |

### ðŸ† MARKET TIERS (Content Allocation)

| Tier | Markets | Content % | Why |
|------|---------|-----------|-----|
| **PLATINUM** | Atherton, Malibu, Beverly Hills, Newport Beach, Palo Alto, Los Altos Hills, Santa Monica, Laguna Beach, Montecito | **40%** | $3M-$7M+ homes, highest fees, complex projects |
| **GOLD** | Manhattan Beach, Pacific Palisades, La Jolla, Del Mar, West Hollywood, Pasadena, Bel Air, Brentwood, Coronado | **35%** | High volume, active ordinances, specific hazards |
| **GROWTH** | Long Beach, San Diego, San Jose, Irvine, Anaheim, Huntington Beach, Calabasas, Glendale, Burbank | **25%** | ADU scaling, standard renovations, volume |

### ðŸŽ¯ CONTENT GENERATION RULES

**Before generating ANY blog post:**

1. **Identify the city's TIER** (Platinum/Gold/Growth)
2. **Identify the city's ARCHETYPE** (Subterranean/Coastal/Compliance)
3. **Select keywords from matching archetype cluster** in `references/keyword-list.md`
4. **Use archetype-specific CTAs** from `references/HIGH-CONVERSION-TARGETING.md`
5. **Include archetype-specific engineering content** (not generic)

**Archetype-Matched Keywords (Examples):**

| Archetype | âœ… USE These Keywords | âŒ NEVER Use For This City |
|-----------|----------------------|---------------------------|
| Subterranean | basement engineering, deep foundation, shoring, underpinning, vertical addition | coastal bluff, soft-story retrofit |
| Coastal | bluff stabilization, Coastal Commission, fire damage, erosion, wave force | basement, deep excavation |
| Compliance | soft-story retrofit, mandatory ordinance, seismic retrofit deadline, penalty | subterranean, coastal bluff |

### ðŸ“ PRIORITY TRIGGERS (Override Normal Rotation)

Check these FIRST before selecting cities:

1. **Active Compliance Deadline?** â†’ Prioritize that city with compliance keywords
   - Santa Monica soft-story deadlines
   - West Hollywood mandatory retrofit
   - LA Ordinance 183893 compliance

2. **Recent Disaster?** â†’ Prioritize affected Platinum/Gold cities
   - Fire season â†’ Malibu, Pacific Palisades, Montecito
   - Post-earthquake â†’ All Platinum coastal cities

3. **Content Gap in Platinum?** â†’ Fill before generating Growth content

**See `references/HIGH-CONVERSION-TARGETING.md` for complete framework.**

---

## ðŸŽ¯ STRATEGIC KEYWORD PRIORITY HIERARCHY

**CRITICAL: Apply this keyword strategy to ALL blog generation. These are the highest-converting keywords for AAA Engineering Design.**

### Tier 1: Primary Target Keywords (HIGHEST PRIORITY)
These keywords capture users actively seeking to hire:
- **"structural engineer near me"** - High volume local intent
- **"residential structural engineer"** - Homeowner-focused, high conversion
- **"California PE licensed engineer"** - Trust-qualified searches

### Tier 2: High-Conversion Niche Keywords (URGENT NEED = PREMIUM PRICING)
These represent distressed clients willing to pay premium rates:
| Keyword | Why High-Value | Lead Gen Score |
|---------|---------------|----------------|
| **red tag removal** | Emergency need, no alternatives, must hire PE | 98 |
| **unpermitted work legalization** | Legal pressure, time-sensitive | 95 |
| **soft story retrofit** | Mandatory compliance (LA Ordinance 183893) | 94 |
| **emergency structural assessment** | Immediate need, premium rates | 97 |
| **post-earthquake inspection** | Time-critical after seismic events | 96 |
| **fire damage structural evaluation** | Insurance-driven, urgent | 95 |

### Tier 3: B2B/Professional Keywords
Target architects, contractors, and developers:
| Keyword | Client Type | Value |
|---------|-------------|-------|
| **engineer of record** | Architects, builders needing PE stamp | High retainer potential |
| **structural consultant for architects** | B2B partnership opportunities | Recurring revenue |
| **construction engineering support** | GCs needing plan review | Project-based |
| **tenant improvement engineer** | Commercial landlords/tenants | Volume work |
| **plan check support engineer** | Architects with permit issues | Quick turnaround |

### âš ï¸ Keywords to AVOID
These capture wrong intent (general engineering, not structural):
- âŒ "engineering design" (without "structural" qualifier)
- âŒ "design engineer" (captures product designers)
- âŒ "engineering consultant" (too broad)
- âŒ "CAD engineering" (drafting, not PE services)

---

## ðŸŒ´ GEOGRAPHIC TARGETING: WEALTH CORRIDOR PRIORITY

**When generating location-specific content, prioritize these high-value markets:**

### Silicon Valley Corridor (Highest Home Values)
| City | Median Home | Priority | Key Opportunities |
|------|-------------|----------|-------------------|
| Atherton | $7.5M+ | CRITICAL | Estate renovations, guest houses |
| Palo Alto | $3.8M | CRITICAL | Tech exec homes, ADUs |
| Los Altos | $4.2M | HIGH | Hillside construction, pools |
| Menlo Park | $3.5M | HIGH | Seismic retrofits, additions |
| Sunnyvale | $2.1M | HIGH | ADU boom, garage conversions |
| San Jose | $1.4M | MEDIUM | Volume market, mixed residential |
| Fremont | $1.5M | MEDIUM | Growing market, new construction |

### Coastal Luxury Markets
| City | Median Home | Priority | Key Opportunities |
|------|-------------|----------|-------------------|
| Malibu | $4.5M+ | CRITICAL | Hillside engineering, coastal erosion |
| Newport Beach | $2.1M | CRITICAL | Coastal Commission, luxury custom |
| Laguna Beach | $2.8M | CRITICAL | Hillside, coastal bluff engineering |
| Manhattan Beach | $3.2M | HIGH | Beach community, seismic retrofit |
| Santa Monica | $2.3M | HIGH | Historic preservation, soft story |
| Corona del Mar | $3.5M | HIGH | Coastal luxury, remodels |

### LA Core Wealth Markets
| City | Median Home | Priority | Key Opportunities |
|------|-------------|----------|-------------------|
| Beverly Hills | $4.8M+ | CRITICAL | Luxury estates, hillside homes |
| Pacific Palisades | $4.2M | CRITICAL | Hillside, fire reconstruction |
| Bel Air | $5.5M+ | CRITICAL | Ultra-luxury, custom engineering |
| West Hollywood | $1.8M | HIGH | Soft story mandatory retrofit |
| Pasadena | $1.1M | HIGH | Historic homes, seismic upgrade |
| Brentwood | $3.2M | HIGH | Luxury residential, additions |

### Geographic Content Requirements
For each location page, MUST include:
1. **Local building department name and contact** (shows local expertise)
2. **Regional geological features**: hillside, coastal, liquefaction zones, fault proximity
3. **Specific municipal codes**: local amendments, soft story ordinances, Coastal Commission
4. **Neighborhood names**: Reference specific areas (e.g., "Balboa Peninsula in Newport Beach")
5. **Local landmarks**: Establish geographic authenticity

---

## ðŸ“š CONTENT PILLAR STRUCTURE (HUB ORGANIZATION)

**All blog posts must be organized within these four strategic content hubs:**

### Hub 1: Compliance Hub (Distressed/Urgent Clients)
**Target Audience**: Homeowners with legal/permit issues
**Buyer Psychology**: Fear of fines, legal pressure, time-sensitive

| Topic Category | Keywords to Target | Content Type |
|---------------|-------------------|--------------|
| Red Tag Situations | red tag removal, red tag structural engineer, condemned house engineer | Emergency response |
| Permit Issues | unpermitted work legalization, permit violation engineer, as-built drawings | Problem-solving |
| Title 24 Compliance | Title 24 engineer, energy compliance structural, CBC compliance | Technical authority |
| As-Built Documentation | as-built drawings engineer, existing conditions report | Documentation |

**CTA Focus**: "Don't risk fines - call for immediate consultation"

### Hub 2: Emergency Hub (Immediate Need)
**Target Audience**: Post-disaster, damage assessment needs
**Buyer Psychology**: Crisis mode, will pay premium for fast response

| Topic Category | Keywords to Target | Content Type |
|---------------|-------------------|--------------|
| Fire/Impact Damage | fire damage structural assessment, car hit house inspection, impact damage engineer | Emergency |
| Shoring & Stabilization | emergency shoring, temporary structural support, building stabilization | Urgent technical |
| Post-Earthquake | post-earthquake inspection, seismic damage assessment, earthquake engineer | Disaster response |
| Foundation Emergency | foundation failure, foundation crack emergency, sinking foundation | Urgent foundation |

**CTA Focus**: "24/7 emergency response available - call now"

### Hub 3: Design Hub (Aspirational/Project Clients)
**Target Audience**: Homeowners planning improvements
**Buyer Psychology**: Excited about project, comparing options

| Topic Category | Keywords to Target | Content Type |
|---------------|-------------------|--------------|
| Hillside Engineering | hillside structural engineer, slope construction, retaining wall design | Technical expertise |
| Open Floor Plans | load bearing wall removal, open concept conversion, structural modification | Popular renovation |
| Luxury Custom Homes | custom home structural engineer, architect collaboration, estate engineering | High-value |
| ADU Design | ADU structural engineering, garage conversion, detached ADU | California hot market |

**CTA Focus**: "Free design consultation - bring your plans"

### Hub 4: Local SEO Silos (Geographic Targeting)
**Target Audience**: Users searching by location
**Buyer Psychology**: Want local expert, convenience matters

**Structure**: Create city-specific landing pages with:
- Local building department references
- Neighborhood-specific examples
- City permit process details
- Local project case studies
- Regional geological considerations

**CTA Focus**: "Serving [City] for 20+ years - local expertise matters"

---

## ðŸ† TRUST SIGNAL INTEGRATION

**Every generated article MUST naturally incorporate these trust signals:**

### Mandatory Trust Elements (Include in Every Post)

#### 1. California PE License Reference
Include within first 300 words:
```markdown
Our California-licensed Professional Engineers (PE) provide stamped plans
accepted by all [City/Region] building departments.
```

#### 2. Experience Quantification
Use specific numbers:
- "20+ years of experience"
- "500+ completed projects"
- "Serving [City] since [year]"

#### 3. Satisfaction Guarantee (Risk Reversal)
For distressed clients especially:
```markdown
**Our Commitment**: If our initial assessment doesn't identify a viable
path forward for your [red tag/permit issue], the consultation is free.
```

#### 4. Response Time Commitment
```markdown
ðŸ“ž Same-day consultations available | 48-hour quote turnaround
```

### Market Positioning Statement
**Position AAA as the "Goldilocks" solution:**

```markdown
### Why Choose AAA Engineering Design?

**Not too big, not too smallâ€”just right for your project.**

- âœ… **More attentive than large firms** - You won't be handed off to junior staff
- âœ… **More capable than solo practitioners** - Full team for complex projects
- âœ… **Right-sized for residential & small commercial** - Projects $5K-$50K
- âœ… **Personal PE involvement** - Licensed engineer on every project
```

---

## âš”ï¸ COMPETITOR DIFFERENTIATION ANGLES

**Use these positioning statements when relevant (never mention competitors by name in published content):**

### vs. Large Firms (Degenkolb, Simpson Gumpertz, etc.)
**Their weakness**: Too expensive, slow response, hand off to junior staff
**Our message**:
```markdown
Unlike large engineering firms where your project may be assigned to junior
staff, AAA Engineering provides direct access to licensed Professional
Engineers on every project. We specialize in residential and small commercial
workâ€”the projects big firms deprioritize.
```

### vs. Alpha Structural (Repair-Focused Competitor)
**Their focus**: Repair and retrofit of damaged structures
**Our differentiation**: Design of new structures
```markdown
We design the newâ€”engineering for additions, ADUs, custom homes, and
structural modifications. When your vision involves building something new,
AAA Engineering brings it to life with PE-stamped plans.
```

### vs. Design-Build Firms
**Their conflict**: Same company designs AND builds (no oversight)
**Our value**: Independent oversight
```markdown
**Independent Engineering Oversight**: Unlike design-build firms where the
same company both designs and constructs, AAA Engineering provides independent
structural analysis. This separation ensures your project is designed for
safetyâ€”not just cost savings.
```

### vs. Unlicensed "Designers"
**Their risk**: No PE stamp, permit rejection risk
**Our protection**:
```markdown
**Don't risk permit rejection.** Only California-licensed Professional
Engineers can stamp structural plans. Our PE-stamped plans are accepted by
all California building departmentsâ€”guaranteed.
```

---

## ðŸ” LONG-TAIL KEYWORD TEMPLATES

**Generate content targeting these high-intent search patterns:**

### Pattern 1: [Service] + [City] + [Property Type]
**Formula**: {service} + in + {city} + for + {property type}

| Example Keyword | Target City | Property Focus |
|----------------|-------------|----------------|
| load bearing wall removal Palo Alto Victorian home | Palo Alto | Historic |
| ADU structural engineering Newport Beach | Newport Beach | Coastal luxury |
| foundation repair Pasadena Craftsman | Pasadena | Historic |
| second story addition Irvine ranch style | Irvine | Mid-century |
| hillside retaining wall Laguna Beach | Laguna Beach | Coastal hillside |
| seismic retrofit San Francisco Victorian | San Francisco | Historic multi-unit |

### Pattern 2: [Problem] + structural engineer
**Formula**: {specific problem} + structural engineer

| Example Keyword | Problem Type | Urgency |
|----------------|--------------|---------|
| car hit house structural inspection | Impact damage | URGENT |
| foundation crack assessment | Foundation issue | HIGH |
| leaning chimney engineer | Structural damage | MEDIUM |
| sagging floor structural evaluation | Floor system | HIGH |
| cracked beam structural engineer | Structural concern | HIGH |

### Pattern 3: [Regulation] + compliance + engineer
**Formula**: {regulation/ordinance} + compliance + engineer

| Example Keyword | Regulation | Geography |
|----------------|------------|-----------|
| soft story ordinance 183893 compliance | LA Soft Story | Los Angeles |
| Title 24 energy compliance engineer | California Energy | Statewide |
| Coastal Commission structural approval | CCC | Coastal cities |
| seismic retrofit ordinance compliance | Various | LA, SF, Oakland |
| ADU state law structural requirements | CA ADU law | Statewide |

### Pattern 4: [Project Type] + cost + [City]
**Formula**: {project} + structural engineering cost + {city}

| Example | Captures |
|---------|----------|
| ADU structural engineering cost Orange County | Price shoppers ready to buy |
| foundation repair cost Los Angeles | Budget-conscious but urgent |
| load bearing wall removal cost Irvine | Remodel planners |
| seismic retrofit cost San Francisco | Compliance-driven |

---

## â“ FAQ INTEGRATION (SCHEMA-READY)

**End relevant posts with these high-value Q&A sections. All must include FAQ Schema.**

### Mandatory FAQ Questions (Include 5-8 per post)

#### Question Category 1: "Do I Need...?" (Requirements)
```json
{
  "@type": "Question",
  "name": "Do I need a structural engineer for [specific project]?",
  "acceptedAnswer": {
    "@type": "Answer",
    "text": "In California, you need a licensed structural engineer for:
    (1) Any load-bearing wall modification, (2) Foundation repairs or
    additions, (3) Second-story additions, (4) Seismic retrofits,
    (5) Any project requiring a building permit with structural components.
    Building departments require PE-stamped plans for permit approval."
  }
}
```

**Variations to include**:
- Do I need a structural engineer for a load bearing wall removal?
- Do I need an engineer for an ADU in California?
- Do I need a structural engineer for a deck?
- Do I need a structural engineer for a room addition?
- Do I need a structural engineer to remove a wall?

#### Question Category 2: Cost Questions
```json
{
  "@type": "Question",
  "name": "How much does a structural engineer cost in California?",
  "acceptedAnswer": {
    "@type": "Answer",
    "text": "Structural engineering fees in California typically range from
    $500-$3,000 for residential assessments, $2,500-$6,000 for ADU plans,
    and $5,000-$15,000+ for custom homes. Costs vary by project complexity,
    location (coastal areas cost more), and timeline (rush fees apply).
    Most engineers offer free initial consultations."
  }
}
```

**Variations to include**:
- How much does a structural engineer cost for a home addition?
- What is the cost of structural engineering plans?
- How much does a foundation engineer charge?
- What does a structural inspection cost?

#### Question Category 3: Red Tag/Compliance Questions
```json
{
  "@type": "Question",
  "name": "What to do if my house is red tagged?",
  "acceptedAnswer": {
    "@type": "Answer",
    "text": "If your house is red tagged: (1) Do NOT occupy the structure -
    it's unsafe, (2) Contact a licensed structural engineer immediately for
    assessment, (3) The engineer will evaluate damage and create a remediation
    plan, (4) Submit engineer's report to building department, (5) Complete
    required repairs with permits, (6) Schedule final inspection for tag removal.
    Timeline varies from weeks to months depending on damage severity."
  }
}
```

**Variations to include**:
- How do I remove a red tag from my property?
- Can I sell a red-tagged house?
- How long does red tag removal take?
- What causes a house to be red tagged?

#### Question Category 4: Process/Timeline Questions
```json
{
  "@type": "Question",
  "name": "How long does structural engineering take?",
  "acceptedAnswer": {
    "@type": "Answer",
    "text": "Typical structural engineering timelines in California:
    - Simple assessments: 1-3 days
    - ADU plans: 2-4 weeks
    - Room additions: 2-3 weeks
    - Custom homes: 4-8 weeks
    - Commercial projects: 6-12 weeks
    Add 2-8 weeks for building department plan check depending on jurisdiction."
  }
}
```

#### Question Category 5: Local/Geographic Questions
```json
{
  "@type": "Question",
  "name": "Who is the best structural engineer in [City]?",
  "acceptedAnswer": {
    "@type": "Answer",
    "text": "When choosing a structural engineer in [City], look for:
    (1) Active California PE license - verify at bpelsg.ca.gov,
    (2) Local project experience in [City] jurisdiction,
    (3) Knowledge of [specific local requirement],
    (4) Clear communication and responsive service,
    (5) Transparent pricing with written estimates.
    AAA Engineering Design has served [City] for 20+ years with
    [X]+ completed projects in the area."
  }
}
```

## â›” CRITICAL URL/SLUG RULE - READ FIRST

**NEVER duplicate the city name in blog post IDs/slugs!**

```
âŒ WRONG: adu-structural-engineering-in-newport-beach-newport-beach
âœ… CORRECT: adu-structural-engineering-in-newport-beach

âŒ WRONG: foundation-repair-in-irvine-irvine
âœ… CORRECT: foundation-repair-in-irvine
```

**The city should appear ONLY ONCE at the end of the slug after `-in-`**

This rule applies to:
- Blog post `id` field in blog-data.ts
- Markdown filenames
- All URL references

---

## When to Use This Skill

Use this skill when the user requests:
- Blog posts for aaaengineeringdesign.com
- Engineering-related content (structural, civil, MEP, residential, commercial)
- Geo-targeted content for California cities (especially Orange County, LA, San Diego)
- 5 daily blog posts targeting different SoCal cities
- Content with keyword optimization and interlinking strategy
- Local SEO optimized articles
- AI Overview (AIO) optimized content

## âš ï¸ SMART MODE IS NOW DEFAULT

**When the user asks to "generate blogs" or "create blog posts", ALWAYS use Smart Mode automatically.**

Smart Mode ensures:
- Data-driven keyword selection (GSC + Bing Lead Gen Scores)
- Optimal keyword+city pairing for maximum conversions
- Automatic cluster prioritization
- High-intent "near me" keywords included

**You do NOT need the user to explicitly say "smart mode" - it's automatic.**

## Workflow: Generating Daily Blog Posts

**âš ï¸ PERMANENT PRIORITY RULE: Complete Underpacked Clusters First!**

**Before generating random posts, ALWAYS check Step 2.5 to see if ANY topic clusters need completion:**
- Check ALL hubs (current + future) in blog-data.ts clusterPages arrays
- Find the most underpacked cluster (lowest post count)
- Currently: **Hub 5 (Commercial & Industrial)** has 0 posts - needs 25 posts âš ï¸ HIGHEST PRIORITY
- Next: **Hub 6 (Foundation Engineering)** has 0 posts - needs 25 posts
- Then: **Hub 3 (Specialized Services)** has 17 posts - needs 8+ more to reach 25
- Generate ALL N posts for underpacked cluster ONLY until it reaches 25+ posts
- This rule applies FOREVER to all clusters (including future hubs you create)
- Only resume random rotation when ALL clusters have 25+ posts

---

**IMPORTANT: Automatic +5 "Near Me" Posts**

When user requests N blog posts, **ALWAYS generate N + 5 total posts:**
- **N posts** = Requested topics (currently: ALL for Hub 5 Commercial & Industrial until packed)
- **+5 posts** = "Near Me" GEO-localized posts (automatic bonus, any cluster)

**Example:**
- User says: "Generate 10 blog posts"
- You generate: **15 posts** (10 for Hub 5 Commercial & Industrial + 5 "near me")

**"Near Me" posts target high-intent local searches:**
- Format: `[keyword] near me in [city]`
- Example: "Residential Structural Engineer Near Me in Newport Beach"
- Rotates through topics: residential engineer, structural engineer, foundation engineer, ADU engineer, seismic retrofit engineer, MEP engineer, civil engineer, etc.

### ðŸš€ SMART MODE: Data-Driven Auto-Generation (DEFAULT)

**âš ï¸ SMART MODE IS NOW THE DEFAULT - Always use this workflow when generating blogs.**

When generating blog posts, the system automatically:

1. **Runs Opportunity Gap Analysis** (`node scripts/opportunity-gap-analyzer.js`)
   - Identifies keywords at positions 11-30 (quick wins)
   - Finds high-impression/low-CTR gaps to optimize
   - Locates cities with insufficient coverage
   - Checks cluster completion status

2. **Fetches Fresh GSC + Bing Data** (if > 7 days old)
   - Google Search Console keyword performance
   - Bing Webmaster Tools data
   - Combined lead generation scoring

3. **Auto-Selects Optimal Keyword+City Pairs**
   - Prioritizes Lead Gen Score 70+ keywords
   - Matches high-value keywords to high-value cities
   - Ensures underpacked clusters get filled first
   - Avoids duplicate keyword+city combinations

4. **Generates Optimized Batch**
   - N posts for highest-priority opportunities
   - +5 "near me" posts (always)
   - All posts include conversion CTAs
   - Schema markup auto-applied

**Smart Mode Output:**
```
ðŸ§  SMART MODE ANALYSIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“Š Data Sources:
   GSC: 150 keywords (updated 2 days ago)
   Bing: 87 keywords (updated 5 days ago)
   Gap Analysis: 23 high-priority opportunities

ðŸŽ¯ Auto-Selected for This Batch:

   CLUSTER PRIORITY: Commercial & Industrial (0/25 posts)

   Keyword Selections (Lead Gen Score):
   1. "commercial structural engineer orange county" (Score: 92)
      â†’ City: Irvine (high-value market)
   2. "warehouse structural engineering california" (Score: 85)
      â†’ City: Ontario (logistics hub)
   3. "tenant improvement engineer near me" (Score: 88)
      â†’ City: Costa Mesa (commercial center)
   [...]

   +5 Near Me Posts:
   - emergency structural engineer near me â†’ Newport Beach
   - structural engineering quote near me â†’ Anaheim
   [...]

   Total: 15 posts optimized for lead generation

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**Smart Mode is used automatically for:**
- All blog generation requests
- Weekly blog batches
- Any request for "X blog posts"
- Default behavior - no need to specify

**Override Smart Mode only when user explicitly requests:**
- Specific keywords they want to target
- A specific event/season campaign
- A very specific content gap to fill manually
- User says "don't use smart mode" or "manual selection"

---

### Step 0: HIGH-CONVERSION TARGETING (MANDATORY FIRST STEP!)

**ðŸš¨ BEFORE ANYTHING ELSE - Apply the High-Conversion Framework:**

**For a batch of N posts, allocate cities by tier:**

| Tier | Allocation | Cities to Use |
|------|------------|---------------|
| **PLATINUM (40%)** | 2 posts (of 5) | Atherton, Malibu, Beverly Hills, Newport Beach, Palo Alto, Los Altos Hills, Santa Monica, Laguna Beach, Montecito |
| **GOLD (35%)** | 2 posts (of 5) | Manhattan Beach, Pacific Palisades, La Jolla, Del Mar, West Hollywood, Pasadena, Bel Air, Brentwood, Coronado |
| **GROWTH (25%)** | 1 post (of 5) | Long Beach, San Diego, Irvine, Anaheim, Huntington Beach, Calabasas, Glendale, Burbank |

**Then match keywords to city archetype:**

| City Archetype | Use These Keywords |
|----------------|-------------------|
| **Subterranean** (Beverly Hills, Atherton, Palo Alto, Manhattan Beach, Bel Air) | basement engineering, deep foundation, shoring, underpinning, vertical addition, hillside excavation |
| **Coastal** (Malibu, Laguna Beach, Newport Beach, La Jolla, Montecito, Del Mar, Coronado) | coastal bluff stabilization, Coastal Commission, fire damage, oceanfront foundation, wave force, erosion |
| **Compliance** (Santa Monica, West Hollywood, Pasadena, Long Beach, Glendale) | soft-story retrofit, mandatory seismic retrofit, ordinance compliance, apartment building retrofit |

**âŒ WRONG:** Generic "ADU engineering" post for Beverly Hills (doesn't match Subterranean archetype)
**âœ… RIGHT:** "Basement Structural Engineering" post for Beverly Hills (matches Subterranean archetype)

---

### Step 0.5: Check Blog Tracking

**âš ï¸ After selecting tier-appropriate cities, verify no duplicates:**

```bash
view BLOG-TRACKING.md
```

**This file tracks ALL keyword+city combinations already used. You MUST:**
1. âœ… Read BLOG-TRACKING.md to see which keyword+city pairs are already published
2. âœ… Verify your selected keyword+city combination is NOT already used
3. âœ… Choose cities from Platinum/Gold/Growth tiers ONLY
4. âœ… Update BLOG-TRACKING.md after generating new posts

**NEVER create duplicate keyword+city combinations!**

---

### Step 0.5: GSC Keyword Extraction (AUTOMATIC WEEKLY)

**ðŸ¤– AUTOMATIC: This runs automatically if last extraction was > 7 days ago**

This automated process provides **real-time, data-driven keyword intelligence** by combining:
1. **Google Search Console API** - Real performance data from YOUR website
2. **"People Also Search For" (PASF) Scraping** - Related keyword discovery
3. **Automated Keyword List Updates** - Fresh, high-performing keywords

**What the System Does Automatically:**

1. **Auto-checks** when GSC extraction last ran
2. **If > 7 days ago**: Automatically runs full GSC + PASF extraction before generating blogs
3. **If < 7 days ago**: Skips extraction and uses existing keywords
4. **Fetches GSC Performance Data** (last 30 days):
   - ðŸ“Š **Impressions** - How many times your pages appeared in search
   - ðŸ–±ï¸ **Clicks** - Actual clicks from search results
   - ðŸ“ˆ **CTR (Click-Through Rate)** - Percentage of impressions that clicked
   - ðŸ“ **Average Position** - Your ranking for each keyword
5. **Scrapes "People Also Search For" (PASF)** from Google:
   - Takes each GSC query and searches Google
   - Extracts related searches Google shows
   - Finds hidden long-tail opportunities
   - (Implementation: lines 193-246 in gsc-keyword-extractor.js)
6. **Combines Data for Maximum Coverage**:
   - GSC queries = proven keywords already driving traffic
   - PASF = related keywords you should target
   - Result = comprehensive keyword strategy
7. **Automatically adds discovered keywords to `references/keyword-list.md`**
8. **Creates `gsc-extracted-keywords.json`** with full metrics for analysis

**When it runs automatically:**
- âœ… **First time**: Never run before
- âœ… **Weekly refresh**: Last run was 7+ days ago
- âœ… **After errors**: Last run file is missing or corrupted
- âŒ **Skip**: Last run was less than 7 days ago

**What you'll see:**

If GSC extraction runs automatically:
```
ðŸ” Checking GSC extraction status...
â° Last run was 8 days ago (threshold: 7 days)
ðŸš€ Running GSC extraction automatically...

ðŸ“Š Connecting to Google Search Console...
âœ… Connected to GSC
ðŸ“¥ Fetching queries from last 30 days...
âœ… Found 150 queries
...
âœ… Added 23 new keywords to keyword list
```

If GSC extraction is skipped:
```
ðŸ” Checking GSC extraction status...
âœ… Last run was 3 days ago (threshold: 7 days)
â­ï¸  Skipping GSC extraction - using existing keywords
```

**Manual run (optional):**

You can still manually run GSC extraction anytime:

```bash
# Manual run (ignores last-run check)
node scripts/gsc-keyword-extractor.js

# Weekly run with custom parameters
GSC_DAYS_BACK=7 MAX_QUERIES=30 node scripts/gsc-keyword-extractor.js
```

**Configuration:**

Customize the auto-run threshold in `.env`:
```bash
# Run GSC extraction if last run was > X days ago (default: 7)
GSC_AUTO_RUN_DAYS=7
```

**Configuration options (via environment variables):**
- `GSC_PROPERTY_URL` - Your website URL (default: https://aaaengineeringdesign.com)
- `GSC_DAYS_BACK` - Days of data to fetch (default: 30)
- `MIN_IMPRESSIONS` - Minimum impressions to include keyword (default: 10)
- `MAX_QUERIES` - Maximum queries to process (default: 50)
- `GSC_CREDENTIALS_PATH` - Path to GSC credentials JSON (default: ./gsc-credentials.json)
- `SERPAPI_KEY` - SerpAPI key for "People Also Search For" extraction (optional)

**Output Files Created:**

1. **`references/keyword-list.md`** - Updated with new keywords
   - Automatically categorized by topic
   - Includes GSC performance notes
   - Ready to use in blog generation

2. **`gsc-extracted-keywords.json`** - Full analysis data
   ```json
   {
     "query": "residential structural engineer orange county",
     "impressions": 1450,
     "clicks": 87,
     "ctr": 0.06,
     "position": 8.5,
     "pasf_keywords": [
       "structural engineer cost orange county",
       "when to hire structural engineer",
       "residential structural engineer near me"
     ],
     "category": "residential-engineering",
     "search_intent": "local-service"
   }
   ```

**Example: How GSC + PASF Data Improves Blog Selection:**

**Without GSC (Old Way):**
- Guess which keywords might work
- No data on what's already performing
- Miss related keyword opportunities

**With GSC + PASF (New Way):**
```
ðŸ“Š GSC Data Shows:
"residential structural engineer orange county"
- Impressions: 1,450
- Clicks: 87
- Position: 8.5
- CTR: 6%

ðŸ’¡ Insight: High impressions but position 8.5 = opportunity!
ðŸŽ¯ Action: Create targeted blog post to rank higher

ðŸ” PASF Discovers Related Keywords:
- "structural engineer cost orange county" (high commercial intent)
- "when to hire structural engineer" (informational, easy to rank)
- "residential structural engineer near me" (local intent)

âœ… Result: Create 4 blog posts instead of 1, covering entire topic cluster!
```

**Setup requirements (one-time):**
1. Create Google Cloud project and enable Search Console API
2. Download service account credentials JSON
3. Save as `gsc-credentials.json` in project root
4. (Optional) Get SerpAPI key for enhanced "People Also Search For" extraction

See `scripts/GSC-SETUP-GUIDE.md` for detailed setup instructions.

**After GSC Extraction - How to Use the Data:**

1. **Prioritize High-Opportunity Keywords:**
   - High impressions + low CTR = need better content to capture clicks
   - High impressions + position 5-15 = can rank #1 with targeted content
   - PASF keywords = expand topic coverage

2. **Review `gsc-extracted-keywords.json` for insights:**
   ```bash
   # See top performing keywords
   cat gsc-extracted-keywords.json | jq '.[] | select(.impressions > 500)'

   # Find high-impression, low-CTR opportunities
   cat gsc-extracted-keywords.json | jq '.[] | select(.impressions > 100 and .ctr < 0.05)'
   ```

3. **Check `references/keyword-list.md` for newly added keywords:**
   - Look for keywords marked with GSC metrics
   - These are proven to drive traffic already

4. **Use in Next Blog Batch:**
   - Prioritize GSC keywords with high impressions
   - Include PASF keywords to create topic clusters
   - Target keywords in positions 5-15 (easiest to improve)

**Keyword Selection Strategy:**
- **Week 1**: GSC keywords with >500 impressions, position 5-15
- **Week 2**: PASF keywords related to your best performers
- **Week 3**: Low-competition long-tail from PASF
- **Week 4**: High-impression, low-CTR (improve existing rankings)

---

### Step 1: Auto-Check & Run GSC Extraction (If Needed)

**AUTOMATIC - Check if GSC extraction should run:**

Before reading references, automatically check if GSC extraction is needed:

1. **Check last run status** by running:
   ```bash
   node -e "const gsc = require('./scripts/gsc-keyword-extractor.js'); const status = gsc.shouldRunGSCExtraction(); console.log(status.shouldRun ? 'â° GSC extraction needed: ' + status.reason : 'âœ… GSC is fresh: ' + status.reason);"
   ```

2. **If GSC extraction is needed** (last run > 7 days ago):
   ```bash
   echo "ðŸš€ Running GSC extraction automatically..."
   node scripts/gsc-keyword-extractor.js
   ```

3. **If GSC is fresh** (last run < 7 days ago):
   ```bash
   echo "â­ï¸  Skipping GSC extraction - using existing keywords"
   ```

**This ensures keyword-list.md always has fresh, high-performing keywords!**

---

### Step 2: Read Required References

**CRITICAL - Always read these files AFTER GSC check:**

```bash
view references/keyword-list.md
view references/city-data.md
view references/near-me-keywords.md  # NEW: For automatic +5 "near me" posts
view references/blog-template.md
view references/interlinking-strategy.md
```

These files contain:
- All available keywords with intent and priority
- Complete city data (demographics, building codes, permit info)
- **"Near me" keyword rotation for automatic +3 bonus posts**
- Exact blog post structure matching aaaengineeringdesign.com format
- Internal linking rules and anchor text strategy

### Step 2.5: âš ï¸ PRIORITY: Check Cluster Completion Status (DYNAMIC RULE)

**ðŸŽ¯ CRITICAL: Complete underpacked clusters BEFORE generating random posts!**

This is a **PERMANENT RULE** that applies to ALL topic clusters (current + future). This step ensures every hub reaches minimum post count before spreading content thin across multiple topics.

**Cluster Completion Thresholds:**
- **Minimum**: 20 posts (adequate for hub page)
- **Ideal**: 25+ posts (well-packed, strong topical authority)

**How This Rule Works:**

1. **ALWAYS check src/lib/blog-data.ts** - Count posts in EVERY hub's `clusterPages` array
2. **Find the most underpacked cluster** (lowest post count)
3. **Priority order:**
   - If ANY cluster has < 20 posts â†’ Generate ALL N posts for that cluster ONLY
   - If multiple clusters < 20 posts â†’ Pick the one with FEWEST posts first
   - If all clusters have 20+ posts but some < 25 â†’ Fill to 25 before rotating
   - If ALL clusters have 25+ posts â†’ Resume normal rotation across all clusters

**Current Cluster Status (As of 2025-11-17):**

```typescript
// Hub 1: Structural Engineering Services Guide
topicCluster: 'structural-engineering'
Current: 25 posts âœ… ADEQUATE

// Hub 2: Engineering Design Services Guide
topicCluster: 'engineering-design'
Current: 32 posts âœ… WELL-PACKED

// Hub 3: Specialized Engineering Services Guide
topicCluster: 'specialized-services'
Current: 17 posts âš ï¸ UNDERPACKED (needs 8+ more posts to reach 25)

// Hub 4: Residential Structural Engineering Guide
topicCluster: 'residential-engineering'
Current: 28 posts âœ… WELL-PACKED

// Hub 5: Commercial & Industrial Structural Engineering Guide ðŸ†• NEW
topicCluster: 'commercial-industrial-engineering'
Current: 0 posts âŒ EMPTY (needs 25+ posts) âš ï¸âš ï¸ HIGHEST PRIORITY

// Hub 6: Foundation Engineering Guide ðŸ†• NEW
topicCluster: 'foundation-engineering'
Current: 0 posts âŒ EMPTY (needs 25+ posts)
```

**Action Required:**

1. **Check ALL hubs in src/lib/blog-data.ts** (including any new ones created since this was written)
2. **Identify the most underpacked cluster** (< 20 posts, or lowest count if multiple)
3. **If ANY cluster is underpacked:**
   - Generate ALL N posts for that cluster ONLY
   - Still add +5 "near me" posts (can be any cluster)
   - Focus keyword selection on topics that fit the underpacked cluster
4. **If ALL clusters are 20+ posts:**
   - Fill clusters with < 25 posts to reach 25 (pick lowest first)
5. **ONLY if ALL clusters have 25+ posts:**
   - Resume normal keyword rotation across all clusters
   - You can still keep this Step 2.5 as a check, or remove it

**Example - Current Priority:**

Since **Hub 5 (Commercial & Industrial)** has **0 posts** (lowest of all hubs), generate posts ONLY for this cluster until it reaches 25+ posts:

**Keywords to prioritize for Hub 5:**
- Commercial structural engineering topics
- Office building structural engineering
- Warehouse structural engineering
- Retail center structural design
- Industrial facility engineering
- Manufacturing plant structural design
- Tenant improvement engineering
- Commercial building codes
- Mixed-use development structural engineering
- Parking structure design
- Commercial foundation design
- Tilt-up construction engineering

**Next priority after Hub 5 reaches 25 posts:**
- **Hub 6 (Foundation Engineering)** - 0 posts (foundation types, repair methods, expansive soils, etc.)
- **Hub 3 (Specialized Services)** - 17 posts (MEP, stormwater, septic, grading topics)

**Important: This Rule Applies to Future Hubs Too!**

When you create new hub pages (e.g., Commercial Engineering, Foundation Engineering, ADU Engineering), they will start with 0 cluster posts. This rule ensures you'll prioritize filling those NEW hubs to 25 posts before going back to random rotation.

**Example Scenario:**
- Today: Hub 3 has 17 posts â†’ Fill to 25 â†’ Done
- Next week: Create new "Commercial Engineering" hub with 0 posts
- Rule activates again: New hub has 0 posts â†’ Fill to 25 first
- Rule applies FOREVER until user explicitly decides all clusters are done

**When to remove this rule:**
- Only remove if you want to allow sparse clusters going forward
- Keep this rule active to maintain high topical authority
- Recommended: Keep this as a permanent check in the workflow

---

### Step 3: Select Keywords and Cities

**Total Posts to Generate: N + 5**
- **N posts** = User's requested number (e.g., 5, 10, etc.)
- **+5 posts** = Automatic "near me" posts (ALWAYS added)

**Regular Keyword Selection (N posts):**
1. **âš ï¸ FIRST: Check Step 2.5 - If cluster completion is required, select keywords for underpacked cluster ONLY**
2. Choose N keywords from `references/keyword-list.md`
3. Mix keyword types:
   - 1-2 Cluster articles (commercial/transactional intent)
   - 2-3 PAA/Informational articles
   - Occasionally include 1 Pillar article
4. Prioritize keywords marked as ðŸŽ¯ High Priority
5. **CHECK BLOG-TRACKING.md** - Avoid keywords already used with target cities

**"Near Me" Keyword Selection (+5 posts):**
1. Use next 5 keywords in rotation from `references/near-me-keywords.md`
2. Check BLOG-TRACKING.md for last "near me" keyword used
3. Resume rotation from next keyword
4. These are HIGH commercial intent (ready to hire)

**City Selection:**
1. **CHECK BLOG-TRACKING.md FIRST** - Use only available cities
2. Use rotation pattern from `references/city-data.md`
3. Day 1: Long Beach, Irvine, Newport Beach, Anaheim, Santa Ana
4. Day 2: Huntington Beach, Costa Mesa, Fullerton, Mission Viejo, Laguna Beach
5. Day 3: San Diego, Los Angeles, Orange, Tustin, Garden Grove
6. Day 4-5: Continue rotation through all 25 cities
7. Mix coastal and inland cities
8. Vary property values (luxury, mid-range, affordable)
9. **VERIFY: Each keyword+city pair is unique (not in BLOG-TRACKING.md)**

**Pairing Strategy:**
- Match keyword intent with appropriate city
- Commercial keywords â†’ Higher-value cities (Newport Beach, Irvine)
- Informational keywords â†’ Any city
- Transactional keywords â†’ Major metro areas (LA, Long Beach, San Diego)

### Step 4: Topic Cluster Integration (CRITICAL FOR SEO)

**ðŸŽ¯ All blog posts must be assigned to a topic cluster for maximum topical authority**

#### What Are Topic Clusters?

Topic clusters are groups of related content organized around a central "hub" page:
- **Hub Page**: Comprehensive 3,000-5,000 word guide on a broad topic
- **Cluster Pages**: Focused 1,500-2,500 word articles on specific subtopics
- **Bidirectional Links**: All clusters link to hub, hub links to all clusters

This structure signals to Google that we are THE authority on the topic.

#### Current Hub Pages

Refer to `.claude/skills/socal-engineering-blog/CLUSTER-MAPPING.md` for the complete cluster structure.

**Active Hubs (LIVE):**

1. **Structural Engineering Services Guide** âœ… LIVE
   - ID: `structural-engineering-services-guide`
   - Target keyword: "structural engineering services"
   - Current clusters: 25 posts âœ… ADEQUATE
   - Topics: Residential, ADU, seismic, foundation, home additions

2. **Engineering Design Services Guide** âœ… LIVE
   - ID: `engineering-design-services-guide`
   - Target keyword: "engineering design services"
   - Current clusters: 32 posts âœ… WELL-PACKED
   - Topics: Design types, costs, professional services, sustainable design

3. **Specialized Engineering Services Guide** âœ… LIVE
   - ID: `specialized-engineering-services-guide`
   - Target keyword: "specialized engineering services california"
   - Current clusters: 17 posts âŒ UNDERPACKED (PRIORITY - needs 8+ more)
   - Topics: MEP, stormwater, septic, grading, civil site engineering

4. **Residential Structural Engineering Guide** âœ… LIVE
   - ID: `residential-structural-engineering-guide`
   - Target keyword: "residential structural engineer california"
   - Current clusters: 28 posts âœ… WELL-PACKED
   - Topics: Home additions, ADUs, foundation repair, seismic retrofitting

5. **Commercial & Industrial Structural Engineering Guide** âœ… LIVE (NEW)
   - ID: `commercial-industrial-structural-engineering-guide`
   - Target keyword: "commercial structural engineer california"
   - Current clusters: 0 posts âŒ EMPTY âš ï¸ HIGHEST PRIORITY
   - Topics: Office buildings, warehouses, retail centers, industrial facilities, tenant improvements, mixed-use

6. **Foundation Engineering Guide** âœ… LIVE (NEW)
   - ID: `foundation-engineering-guide`
   - Target keyword: "foundation engineer california"
   - Current clusters: 0 posts âŒ EMPTY
   - Topics: Foundation types, settlement, expansive soils, foundation repair, underpinning, hillside foundations

**Future Hubs (Not Yet Created):**

7. **Building Codes & Compliance** (needs 20+ posts before creating hub)
   - Topics: Title 24, licensing, associations, permits

8. **ADU Engineering Services** (planned)
   - Topics: ADU requirements, garage conversions, detached ADUs, permitting

#### How to Assign Posts to Clusters

**For Each New Blog Post:**

1. **Determine Hub Assignment** based on primary keyword:

| Primary Keyword Contains... | Assign to Hub | Hub ID |
|----------------------------|---------------|---------|
| "structural engineer", "seismic", "foundation", "ADU", "home addition" | Structural Engineering | `structural-engineering-services-guide` |
| "engineering design", "design services", "sustainable design", "custom design" | Engineering Design | `engineering-design-services-guide` (planned) |
| "MEP", "mechanical engineering", "stormwater", "septic", "grading" | Specialized Services | `specialized-engineering-services-guide` (planned) |
| "Title 24", "building code", "license", "compliance" | Building Compliance | `building-codes-compliance-guide` (planned) |
| "commercial building", "tenant improvement", "commercial engineering" | Commercial Services | `commercial-engineering-services-guide` (planned) |

2. **Add Cluster Metadata Fields** to the BlogPost object:

```typescript
{
  id: 'your-post-id',
  title: 'Your Post Title',
  excerpt: '...',
  category: 'Structural Engineering',
  date: '2025-11-17',
  readTime: '12 min read',
  author: 'AAA Engineering Team',
  image: 'https://...',
  featured: false,
  relatedArticles: ['related-post-1', 'related-post-2', 'hub-page-id'],  // â† ADD HUB TO RELATED ARTICLES

  // Topic Cluster Metadata (REQUIRED for all new posts)
  contentType: 'cluster',  // or 'hub' for hub pages, 'supporting' for general posts
  hubPage: 'structural-engineering-services-guide',  // ID of parent hub
  topicCluster: 'structural-engineering',  // Cluster name
  primaryKeyword: 'adu structural engineering',  // Main keyword for this post
  secondaryKeywords: ['accessory dwelling unit', 'adu design'],  // 2-3 related keywords
  geoTarget: 'Los Alamitos',  // City/region targeted

  content: `...`
}
```

3. **Add Hub Reference in Content** (in first 500 words):

```markdown
This article is part of our comprehensive [Structural Engineering Services Guide](/blog/structural-engineering-services-guide), which covers everything you need to know about structural engineering in Southern California.
```

OR integrate naturally:

```markdown
For a complete overview of structural engineering services, see our [comprehensive structural engineering guide](/blog/structural-engineering-services-guide).
```

4. **Add Hub to Related Articles Section** at the bottom of content:

```markdown
## Related Resources

**Comprehensive Guides:**
- [Complete Structural Engineering Services Guide](/blog/structural-engineering-services-guide)

**Related Topics:**
- [ADU Structural Requirements](/blog/...)
- [Foundation Design Guide](/blog/...)
```

#### Cluster Metadata Field Definitions

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| `contentType` | 'hub' \| 'cluster' \| 'supporting' | Yes | Content tier in cluster hierarchy | `'cluster'` |
| `hubPage` | string | If cluster | ID of parent hub page | `'structural-engineering-services-guide'` |
| `clusterPages` | string[] | If hub | Array of cluster post IDs | `['adu-post-1', 'foundation-post-2']` |
| `topicCluster` | string | Yes | Cluster name | `'structural-engineering'` |
| `primaryKeyword` | string | Yes | Main target keyword | `'adu structural engineering'` |
| `secondaryKeywords` | string[] | Optional | 2-3 supporting keywords | `['adu design', 'accessory dwelling']` |
| `geoTarget` | string | Optional | City or region | `'Los Alamitos'` or `'Southern California'` |

---

### âš ï¸ CRITICAL: Blog Post ID Format & Linking Rules

**MUST READ BEFORE CREATING HUB PAGES OR LINKING TO BLOG POSTS**

#### Blog Post ID Pattern

**ðŸ†• NEW FORMAT (For All New Blog Posts - Use This!):**

Generate IDs using this clean pattern:
```typescript
// Format: {keyword-phrase}-in-{city}
'adu-structural-engineering-in-newport-beach'
'structural-engineering-for-home-additions-in-brea'
'seismic-retrofit-requirements-in-cypress'
'commercial-building-engineering-in-irvine'
```

**ID Generation Rules:**
1. Take the primary keyword phrase
2. Convert to lowercase
3. Replace spaces with hyphens
4. Add `-in-` separator
5. Add city name (kebab-case) **âš ï¸ SINGLE OCCURRENCE ONLY - NEVER DUPLICATE THE CITY**
6. Use kebab-case throughout (all lowercase, hyphens only)

**â›” STOP AND VERIFY: Does your ID end with the city name appearing TWICE?**
```
âŒ BAD: deep-foundation-design-in-poway-poway     (poway appears twice!)
âœ… GOOD: deep-foundation-design-in-poway          (poway appears once)
```

**Examples:**
- Keyword: "ADU Structural Engineering" + City: "Newport Beach"
  â†’ ID: `adu-structural-engineering-in-newport-beach`

- Keyword: "Commercial Building Engineering" + City: "Irvine"
  â†’ ID: `commercial-building-engineering-in-irvine`

- Keyword: "Seismic Retrofit Requirements" + City: "Cypress"
  â†’ ID: `seismic-retrofit-requirements-in-cypress`

**Non-geo Posts (no city):**
```typescript
'structural-engineering-services-guide'  // Hub pages
'building-code-compliance-2024'  // Year-based
'structural-engineer-requirements'  // Generic topics
```

---

**âš ï¸ LEGACY FORMAT (Existing Posts Only - DO NOT USE for new posts):**

Most existing blog posts (106 total) use an OLD pattern with city duplication:
```typescript
'adu-structural-engineering-in-los-alamitos-los-alamitos'  // City appears TWICE
'structural-engineering-for-home-additions-in-brea-brea'  // City appears TWICE
'seismic-retrofit-requirements-in-cypress-cypress'  // City appears TWICE
```

**Why the duplication exists:** Legacy automated generation created this pattern. We're NOT changing existing posts (would break external links), but NEW posts should use the clean format above.

**When linking to existing posts:** Use the full duplicated ID as it appears in blog-data.ts

#### How to Find Correct Blog Post IDs

**BEFORE creating hub page links, run this command:**

```bash
# Get all blog post IDs sorted alphabetically
grep -o "id: '[^']*'" src/lib/blog-data.ts | sed "s/id: '//" | sed "s/'//" | sort -u
```

**Or search for specific topics:**

```bash
# Find all ADU-related post IDs
grep -o "id: '[^']*'" src/lib/blog-data.ts | sed "s/id: '//" | sed "s/'//" | grep adu

# Find all seismic-related post IDs
grep -o "id: '[^']*'" src/lib/blog-data.ts | sed "s/id: '//" | sed "s/'//" | grep -E "seismic|earthquake|retrofit"

# Find all posts for a specific city
grep -o "id: '[^']*'" src/lib/blog-data.ts | sed "s/id: '//" | sed "s/'//" | grep "newport-beach"
```

#### Hub Page Content Format (RichBlogContent Component)

Hub page content is parsed by the `RichBlogContent` component which supports:

**âœ… Supported Markdown:**

```markdown
## Main Heading (H2)
Creates a gradient card with large heading

### Sub Heading (H3)
Creates a styled H3 with decorative line

### Sub Heading with Bullet Points
- [Link Text](/blog/actual-post-id)
- [Another Link](/blog/another-actual-post-id)

**Bold Statement**
Creates a highlighted card with icon

Regular paragraph text with [inline links](/blog/post-id).

Important: This is a callout box
Note: Another callout style
Tip: A helpful tip box
Pro Tip: Expert advice box
```

**âŒ Common Errors:**

1. **Wrong: Using shortened IDs**
   ```markdown
   - [ADU Engineering](/blog/adu-structural-engineering-newport-beach)
   ```
   Should be:
   ```markdown
   - [ADU Engineering](/blog/adu-structural-engineering-in-newport-beach-newport-beach)
   ```

2. **Wrong: Forgetting `/blog/` prefix**
   ```markdown
   - [Link](adu-structural-engineering-in-newport-beach-newport-beach)
   ```
   Should be:
   ```markdown
   - [Link](/blog/adu-structural-engineering-in-newport-beach-newport-beach)
   ```

3. **Wrong: Using markdown in clusterPages array**
   ```typescript
   clusterPages: [
     '[ADU Engineering](/blog/adu-post)'  // âŒ NO! Just IDs!
   ]
   ```
   Should be:
   ```typescript
   clusterPages: [
     'adu-structural-engineering-in-newport-beach-newport-beach'  // âœ… Just the ID
   ]
   ```

#### Verification Checklist Before Committing Hub Page

**Run these checks:**

```bash
# 1. Extract all blog post IDs from your hub content
grep -o '/blog/[^)]*' src/lib/blog-data.ts | grep "your-hub-id" -A 200 | sed 's|/blog/||' | sort -u > hub-links.txt

# 2. Get all actual blog post IDs
grep -o "id: '[^']*'" src/lib/blog-data.ts | sed "s/id: '//" | sed "s/'//" | sort -u > actual-ids.txt

# 3. Find broken links (IDs in hub that don't exist)
comm -23 hub-links.txt actual-ids.txt

# If this outputs anything, those are BROKEN LINKS - fix them!
```

**âœ… All hub links verified = No 404 errors**

---

### ðŸ”§ RichBlogContent Component (How Hub Content is Rendered)

**Location:** `src/components/RichBlogContent.tsx`

This component parses hub page content and converts markdown to rich HTML. Understanding how it works is critical for proper formatting.

#### How Content is Parsed

**1. Content is split by double newlines (`\n\n`)**

```typescript
const sections = content.split('\n\n')
```

Each section between blank lines is processed independently.

**2. Processing Order (IMPORTANT - First match wins!)**

The component checks each section in this order:
1. âœ… Main headings (`## `)
2. âœ… Sub-headings with bullet points (`### ` + `\n-`)
3. âœ… Sub-headings alone (`### `)
4. âœ… Bold text (`**text**`)
5. âœ… Bullet point lists (`\n-`)
6. âœ… Callout boxes (`Important:`, `Note:`, `Tip:`)
7. âœ… Regular paragraphs

**3. Markdown Link Parsing**

Links are converted using regex:
```typescript
const withLinks = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g,
  '<a href="$2" class="text-primary hover:underline font-medium">$1</a>')
```

#### âœ… FIXED: Sub-headings with Bullet Points

**Previously (BUG - caused raw markdown to show):**
```typescript
// Old code only extracted heading text, ignoring bullet points
if (section.startsWith('### ')) {
  const title = section.replace('### ', '').trim()  // Got ENTIRE section as title!
  return <h3>{title}</h3>  // Rendered bullets as plain text in heading
}
```

**Now (FIXED - properly handles headings + bullets):**
```typescript
// New code checks for bullet points after heading
if (section.startsWith('### ')) {
  if (section.includes('\n-')) {
    // Extract heading from first line only
    const lines = section.split('\n')
    const heading = lines[0].replace('### ', '').trim()
    const items = lines.slice(1).filter(line => line.trim().startsWith('-'))

    // Render heading + parsed bullet list with clickable links
    return (
      <div>
        <h3>{heading}</h3>
        <ul>
          {items.map(item => {
            const withLinks = item.replace(/\[...\]\(...\)/g, '<a...>')
            return <li dangerouslySetInnerHTML={{ __html: withLinks }} />
          })}
        </ul>
      </div>
    )
  }
}
```

**This fix resolved 114 broken links across 3 hub pages!**

#### Best Practices for Hub Content

**âœ… DO:**
```markdown
## Related Resources

### Residential Services
- [When to Hire](/blog/when-to-hire-residential-structural-engineer-mission-viejo)
- [What Engineers Do](/blog/what-do-structural-engineers-do-costa-mesa)

### Commercial Services
- [Commercial Engineering](/blog/commercial-building-engineering-design-california-anaheim)
- [Tenant Improvements](/blog/commercial-tenant-improvement-engineering-in-murrieta-murrieta)
```

**âŒ DON'T:**
```markdown
## Related Resources

### Residential Services
[When to Hire](/blog/...), [What Engineers Do](/blog/...)  // âŒ Comma-separated on same line

### Commercial Services - [Commercial Engineering](/blog/...) - [Tenant Improvements](/blog/...)  // âŒ Links in heading
```

**Why?** The component expects:
- Headings on their own line
- Bullet points on separate lines
- One link per bullet point (or space-separated is ok)

---

#### Internal Linking Rules for Clusters

**Every Cluster Post Must:**
- âœ… Link to parent hub page (in content + relatedArticles)
- âœ… Link to 2-3 sibling clusters (related topics in same hub)
- âœ… Link to 2-3 service pages
- âœ… Include hub reference in first 500 words

**Hub Pages Must:**
- âœ… Link to ALL cluster posts (18-25 links)
- âœ… Group clusters by subtopic
- âœ… Include contextual anchor text for each cluster link
- âœ… Feature comprehensive FAQ section (8-10 questions)

#### Example: Cluster Post Template

```markdown
# ADU Structural Engineering in Los Alamitos: Complete 2025 Guide

**Updated: November 2025**

[Opening paragraph with problem/solution...]

As part of our [comprehensive structural engineering services](/blog/structural-engineering-services-guide) in Southern California, we specialize in ADU design and permitting throughout Orange County, including Los Alamitos, Seal Beach, and Cypress.

## What is ADU Structural Engineering?

[Content...]

For related guidance, see our articles on [home addition engineering](/blog/structural-engineering-for-home-additions-brea) and [foundation assessment](/blog/foundation-assessment-guide-buena-park).

[Rest of content...]

## Related Resources

**Comprehensive Guides:**
- [Complete Structural Engineering Services Guide](/blog/structural-engineering-services-guide)

**Related Services:**
- [Foundation Design for ADUs](/blog/...)
- [Seismic Requirements for ADUs](/blog/...)
- [Title 24 Compliance for ADUs](/blog/...)
```

#### Benefits of Topic Cluster Strategy

âœ… **Topical Authority**: Google sees we comprehensively cover structural engineering
âœ… **Better Rankings**: Hub pages rank for high-volume head terms
âœ… **Cluster Rankings**: Each cluster ranks for specific long-tail keywords
âœ… **Featured Snippets**: Comprehensive content captures more featured snippets
âœ… **Internal Link Flow**: PageRank flows from hub to clusters and back
âœ… **User Experience**: Visitors find related content easily
âœ… **Content Organization**: Clear structure makes content management easier

### Step 5: Generate Each Blog Post

For each of the 5 posts, follow this process:

**A. Generate Blog Post ID**

**CRITICAL - Use the NEW clean ID format (no city duplication):**

```
ID Format: {keyword-phrase}-in-{city-name}
```

**Example:**
- Keyword: "Commercial Building Engineering"
- City: "Newport Beach"
- ID: `commercial-building-engineering-in-newport-beach`

**Steps:**
1. Take primary keyword phrase
2. Convert to lowercase
3. Replace spaces with hyphens
4. Replace special characters with hyphens (e.g., "&" â†’ "and")
5. Add `-in-` separator
6. Add city name (kebab-case) - **single occurrence, NO duplication**
7. **Verify uniqueness** - check blog-data.ts to ensure ID doesn't already exist

**Verification Command:**
```bash
grep "id: 'your-generated-id'" src/lib/blog-data.ts
# Should return nothing if ID is unique
```

**B. Create Post Structure**

Use the EXACT structure from `references/blog-template.md`:

1. Header Metadata
2. Opening paragraph with regional context
3. What is [Topic]? section
4. Core Services/Types section
5. Geographic Considerations (heavy city mentions)
6. Cost section (regional pricing)
7. Selection criteria section
8. Common challenges section
9. Why Choose AAA section
10. Contact section
11. CTA box
12. Related Articles (3 posts)

**B. Write Content Following These Rules:**

**Geographic Integration (CRITICAL):**
- Primary City: 15-20 mentions throughout post
- Secondary Cities: 5-8 mentions total
- Use city-specific data from `references/city-data.md`
- Include local regulations, permit times, market data

**Keyword Optimization:**
- Primary keyword in: Title, H1, first paragraph, one H2, conclusion, URL
- Keyword density: 1-1.5% (natural, not stuffed)
- Optimize for featured snippets (direct answers early)

**Internal Linking (from `references/interlinking-strategy.md`):**
- 5-8 internal links total per post
- 2-3 service page links
- 2-4 blog post links (related topics)
- Use keyword-rich anchor text
- First link within first 500 words

**External Linking:**
- 2-3 authority links (building dept, CBC, professional orgs)
- Open in new tabs

**C. Add Schema Markup (REQUIRED - All Schemas Combined)**

**CRITICAL FOR RICH SNIPPETS & LOCAL PACK:** Every blog post MUST include comprehensive schema markup. Use the combined schema template from `assets/schema-templates/combined-blog-schema.json`.

### Schema Priority Levels

| Priority | Schema | Template File | Rich Snippet Benefit |
|----------|--------|---------------|---------------------|
| **HIGH** | Organization | `organization-schema.json` | Knowledge Panel, brand identity, E-E-A-T |
| **HIGH** | LocalBusiness | `local-business-schema.json` | Local Pack, Maps, "near me" searches |
| **HIGH** | Service | `service-schema.json` | Service listings, availability, pricing |
| **HIGH** | FAQ | `faq-schema.json` | FAQ dropdowns, PAA boxes, expanded footprint |
| **MEDIUM** | Breadcrumb | `breadcrumb-schema.json` | Site hierarchy in results |
| **MEDIUM** | Review/AggregateRating | `review-snippets-schema.json` | Star ratings, trust signals |
| **MEDIUM** | Article | `article-schema.json` | Article info, freshness signals |
| **LOWER** | HowTo | `howto-schema.json` | Step-by-step display (process posts only) |
| **LOWER** | Product | `product-schema.json` | Price range cards (service posts) |

### Combined Schema Implementation

**ALWAYS use the combined @graph format** from `assets/schema-templates/combined-blog-schema.json`:

```json
{
  "@context": "https://schema.org",
  "@graph": [
    { "@type": "Organization", "@id": ".../#organization", ... },
    { "@type": "LocalBusiness", "@id": ".../#localbusiness", "areaServed": {"@type": "City", "name": "{{CITY}}"}, ... },
    { "@type": "Service", "name": "{{SERVICE}} in {{CITY}}", "provider": {"@id": ".../#organization"}, ... },
    { "@type": "TechnicalArticle", "headline": "{{TITLE}}", "author": {"@id": ".../#organization"}, ... },
    { "@type": "BreadcrumbList", "itemListElement": [...] },
    { "@type": "FAQPage", "mainEntity": [...] },
    { "@type": "Review", "itemReviewed": {"@id": ".../#organization"}, ... }
  ]
}
```

### Schema Field Requirements

**Organization (include in ALL posts):**
- Company name, logo, address, phone, email
- Social profile links (LinkedIn, Facebook)
- Aggregate rating (4.9/5 from 127 reviews)
- Service areas (5 counties)

**LocalBusiness (include in ALL geo-targeted posts):**
- City-specific `areaServed` field with target city
- Business hours, contact info
- `hasOfferCatalog` with services + free consultation offer
- Price range indicator

**Service (include in ALL service-related posts):**
- Service name + city (e.g., "ADU Engineering in Newport Beach")
- Service type and description
- Price specifications
- Links to provider (Organization @id)

**FAQ (include in ALL posts - 5 minimum):**
- Extract from H2 question headers in content
- Direct, concise answers (40-100 words each)
- Include pricing, timeline, and process questions
- Add city-specific questions

**Review (include 2-3 in ALL posts):**
- Pull from "Local Social Proof" section
- Include reviewer name, rating (5 stars), review text
- Use recent dates (within 6 months)

### Validation Checklist

Before publishing, validate schema at:
- https://validator.schema.org/
- https://search.google.com/test/rich-results

**Common Validation Errors:**
- [ ] Missing `@type` declarations
- [ ] Invalid ISO 8601 date format (use YYYY-MM-DD)
- [ ] Broken `@id` references
- [ ] Missing required fields (name, description)
- [ ] Invalid URL formats

See `assets/schema-templates/combined-blog-schema.json` for complete template with all placeholders documented.

**D. Create Related Articles Section**

Select 3 related articles:
- One from same category
- One with similar keyword theme
- One targeting different city/region

### Step 6: Quality Control Checklist

Verify each post has:
- [ ] **â›” SLUG/ID CHECK: City name appears ONLY ONCE (not duplicated like `city-city`)**
- [ ] **Keyword+City combination verified as NEW in BLOG-TRACKING.md**
- [ ] Primary keyword in title, H1, first paragraph, one H2
- [ ] City name in title and 2+ H2 headers
- [ ] 5-8 internal links with keyword anchors
- [ ] Primary city mentioned 15-20 times
- [ ] Local building codes/regulations included
- [ ] Related articles section populated
- [ ] "Local Social Proof" section with 2-3 testimonials

**Schema Checklist (ALL REQUIRED - Use combined-blog-schema.json):**
- [ ] Organization Schema - company info, logo, social links, credentials
- [ ] LocalBusiness Schema - city-specific areaServed, hours, services catalog
- [ ] Service Schema - service name + city, pricing, provider reference
- [ ] Article Schema - headline, description, dates, author/publisher
- [ ] Breadcrumb Schema - Home > Blog > Category > Post
- [ ] FAQ Schema - 5+ questions extracted from H2 headers with direct answers
- [ ] Review Schema - 2-3 testimonials with 5-star ratings and dates
- [ ] All schemas combined in single `@graph` array
- [ ] All `@id` references properly linked between schemas
- [ ] Schemas validated at https://validator.schema.org/
- [ ] Rich results tested at https://search.google.com/test/rich-results

**âš ï¸ MANDATORY SLUG VERIFICATION:**
Before proceeding, visually confirm EVERY blog post ID follows this pattern:
```
âœ… keyword-phrase-in-city-name     (city appears ONCE)
âŒ keyword-phrase-in-city-name-city-name  (city appears TWICE - FIX THIS!)
```

### Step 6.5: Featured Post Selection (AUTOMATIC)

**ðŸŒŸ Featured Post Rule:**
- For every 5 new blog posts generated, mark 1 as `featured: true`
- **Maximum of 3 featured posts total** at any given time
- When adding new featured post and already at 3, remove `featured: true` from oldest featured post

**Calculation:**
- Generating 5 posts â†’ 1 featured
- Generating 10 posts â†’ 2 featured
- Generating 15 posts â†’ 3 featured
- Generating 20 posts â†’ 4 featured (but must remove 1 old featured to maintain max 3)

**Example Batch (10 posts):**
- Posts 1-4: `featured: false`
- **Post 5**: `featured: true` â† First featured
- Posts 6-9: `featured: false`
- **Post 10**: `featured: true` â† Second featured
- +5 "near me" posts: `featured: false` (never featured)

**Featured Post Selection Strategy:**
1. Choose posts with highest commercial intent keywords (hire, cost, find, best, top)
2. Prefer posts targeting high-value cities (Newport Beach, Irvine, Los Angeles, San Diego)
3. Ensure featured posts represent diverse topics (not all same keyword)
4. Prioritize posts that will rank well (low competition, high search volume)

**Maintaining 3-Post Maximum:**

Before adding new featured posts, check current count:
```bash
grep -c "featured: true" src/lib/blog-data.ts
```

If count will exceed 3:
1. Identify oldest featured posts (check dates)
2. Remove `featured: true` from oldest posts
3. Keep only the 3 most recent featured posts

**Important:** Hub pages are marked `featured: true` but don't count toward the 3-post limit (they're permanent featured content).

### Step 7: Output Format

Create 5 separate markdown files:
```
blog-posts-[DATE]/
â”œâ”€â”€ 1-[keyword-slug]-[city-slug].md
â”œâ”€â”€ 2-[keyword-slug]-[city-slug].md
â”œâ”€â”€ 3-[keyword-slug]-[city-slug].md
â”œâ”€â”€ 4-[keyword-slug]-[city-slug].md
â””â”€â”€ 5-[keyword-slug]-[city-slug].md
```

Save files to project root directory in format: `blog-posts-nov-[day]-2025/`

### Step 8: Update Blog Tracking (MANDATORY)

**CRITICAL: Update BLOG-TRACKING.md immediately after generating posts**

Add each new post to the tracking file:
```markdown
| [Keyword/Topic] | [City] | âœ… Published | [Date] |
```

Update the following sections in BLOG-TRACKING.md:
1. âœ… Add new keyword+city combinations to "Published Blog Posts" table
2. âœ… Update city usage counts in "Available Cities" section
3. âœ… Update "Keywords Already Used with Cities" section
4. âœ… Update "Recommended Next 5 City Selections" for future batches

### Step 9: Deploy to Website (CRITICAL - AUTOMATED EXECUTION)

**âš ï¸ MANDATORY: Execute ALL deployment commands automatically after blog generation**

**The project includes `scripts/add-blog-posts.js` which automatically:**
1. **Auto-detects the most recent `blog-posts-*` directory** (or accepts path as argument)
2. Parses markdown files from that directory
3. Extracts frontmatter and content
4. Converts to TypeScript BlogPost objects
5. **Automatically sets first 3 posts as `featured: true`** (appears in Featured Articles)
6. **Uses date from frontmatter or today's date**
7. **CORRECTLY inserts posts into BLOG_POSTS array BEFORE helper functions**
8. Preserves all existing posts and structure

**Execute these commands in sequence:**

```bash
# 1. Run the conversion script (auto-detects most recent blog-posts directory)
node scripts/add-blog-posts.js

# 2. Verify build succeeds
npm run build

# 3. Commit changes with detailed commit message
git add src/lib/blog-data.ts blog-posts-nov-8-2025/ .claude/skills/socal-engineering-blog/BLOG-TRACKING.md
git commit -m "$(cat <<'EOF'
Add [NUMBER] new SEO-optimized blog posts for [Month Day, Year]

- [Blog Post 1 Title]
- [Blog Post 2 Title]
- [Blog Post 3 Title]
[- Blog Post 4 Title if 4+ posts]
[- Blog Post 5 Title if 5 posts]

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"

# 4. Push to trigger Netlify deployment
git push origin master

# 5. Submit to search engines (optional but recommended)
npm run indexnow
```

**What the script does:**
- âœ… **Auto-detects** most recent blog-posts directory
- âœ… **First 3 posts automatically featured** (shows in Featured Articles section)
- âœ… **Date auto-detected** from frontmatter publishDate or uses today's date
- âœ… **Clear output** showing which posts are featured with â­ indicator

**CRITICAL BUG FIX IMPLEMENTED:**
The `add-blog-posts.js` script was updated to fix a bug where posts were incorrectly inserted into the `getRelatedPosts()` function instead of the `BLOG_POSTS` array. The script now:
- Finds the `// Helper functions` comment
- Locates the closing bracket `]` of BLOG_POSTS array BEFORE that comment
- Inserts new posts at the correct location
- Ensures posts appear in "All Articles" and are sorted by date

**Never manually edit blog-data.ts** - always use the automated script to prevent insertion errors.

**Deployment Execution Instructions:**
- Run ALL 5 commands sequentially
- Wait for each command to complete before running the next
- Verify successful output from each step
- Report any errors immediately
- Confirm deployment success after git push completes

### Step 10: Post-Deployment Summary

After successful deployment, provide a comprehensive summary:

1. **Blog Posts Generated:**
   - List all post titles with keywords and cities
   - Word count for each post
   - Category and intent type

2. **Deployment Status:**
   - âœ… Conversion script executed
   - âœ… Build verified successful
   - âœ… Changes committed to git
   - âœ… Pushed to master branch
   - âœ… Search engines notified (if indexnow ran)

3. **SEO & Tracking:**
   - Keywords used with intent types
   - Cities targeted with geographic distribution
   - Internal links created per post
   - **Confirmation that BLOG-TRACKING.md has been updated**

4. **Next Steps Recommendations:**
   - Suggested cities for next batch (from BLOG-TRACKING.md)
   - Keyword strategies for upcoming posts
   - Content mix recommendations

## Key Principles

**Geographic Authenticity:**
- Every city mention must be contextual
- Include real building codes, permit data
- Use specific examples, not generic statements

**Keyword Integration:**
- Write for humans first
- Natural language over keyword density
- Variations and LSI terms

**Link Strategy:**
- Every link adds value
- Service pages are priority
- Distribute links throughout

**AI Citation Optimization (NEW - 2025):**
- **Direct Answers**: Start each major section with 40-60 word direct answer
- **Question Headers**: Convert ALL H2 headers to question format
  - âŒ "Structural Engineering Services"
  - âœ… "What Structural Engineering Services Are Available in [City]?"
- **Modular Content**: Structure for easy AI extraction (bullets, tables, clear sections)
- **E-E-A-T Signals**: Include author credentials, PE license mentions, years of experience
- **Freshness Indicators**: Add "Updated: [Month Year]" at top of post
- **FAQ Schema**: Every post needs 5-8 FAQ questions with schema markup
- **Semantic HTML**: Use proper tags (article, section, aside) for AI parsing

*See `.claude/AI-OPTIMIZED-CONTENT-GUIDELINES.md` for complete details*

## Common Mistakes to Avoid

âŒ DON'T:
- Force city names unnaturally
- Keyword stuff
- Reuse examples across posts
- Link to competitors
- Skip internal linking

âœ… DO:
- Make city mentions contextual
- Write naturally
- Provide unique examples
- Link strategically
- Include local data

## Resources

### references/
- `keyword-list.md` - Complete keyword inventory, GSC queries, tracking
- `city-data.md` - 25+ SoCal cities with full demographics, regulations, permit data
- `blog-template.md` - EXACT post structure matching aaaengineeringdesign.com
- `interlinking-strategy.md` - Complete linking system and anchor text rules

### assets/schema-templates/

**HIGH PRIORITY SCHEMAS:**
- `organization-schema.json` - Organization/brand identity (Knowledge Panel)
- `local-business-schema.json` - LocalBusiness for Local Pack/Maps
- `service-schema.json` - Service listings with pricing
- `faq-schema.json` - FAQ dropdowns and PAA boxes

**MEDIUM PRIORITY SCHEMAS:**
- `breadcrumb-schema.json` - Site hierarchy display
- `review-snippets-schema.json` - Star ratings and testimonials
- `article-schema.json` - Article info and freshness

**LOWER PRIORITY SCHEMAS:**
- `howto-schema.json` - Step-by-step guides
- `product-schema.json` - Product/service cards

**COMBINED TEMPLATE:**
- `combined-blog-schema.json` - **USE THIS** - All schemas combined in @graph format with placeholders

---

## Troubleshooting & Common Issues

### Issue: Blog Posts Not Appearing on Website

**Symptoms:**
- Posts don't show in "All Articles" section
- Posts missing from recent posts
- Build succeeds but posts invisible

**Cause:**
Posts were inserted in wrong location in `blog-data.ts` file (inside helper functions instead of BLOG_POSTS array)

**Solution:**
1. Restore blog-data.ts: `git checkout HEAD~1 -- src/lib/blog-data.ts`
2. Re-run the corrected script: `node scripts/add-blog-posts.js`
3. Verify helper functions are AFTER posts: Check that `// Helper functions` comment comes after the closing `]` of BLOG_POSTS array
4. Test build: `npm run build` should succeed with correct number of static pages
5. Commit and redeploy

**Prevention:**
- Always use `scripts/add-blog-posts.js` - never manually edit blog-data.ts
- The script is designed to find `// Helper functions` comment and insert posts before it
- Verify script output shows "Successfully added X blog posts"

### Verifying Correct Insertion

After running the script, check these markers in `src/lib/blog-data.ts`:

```typescript
// Last post in BLOG_POSTS array
  },
]  // â† This closes BLOG_POSTS array

// Helper functions  // â† This should come AFTER the ]
export function getFeaturedPosts(): BlogPost[] {
```

If you see posts appearing inside function definitions, the script failed - restore and re-run.

---

## ðŸ“ Local Pack & Google Maps Optimization (NEW)

### Why Local Pack Matters for Lead Generation

The Google Local Pack (3-pack map results) appears for 46% of all Google searches and has the highest click-through rates for local service queries. Capturing Local Pack positions for "near me" and city-specific searches is critical for lead generation.

### Local Pack Optimization Checklist

**For Every Geo-Targeted Blog Post:**

1. **Include LocalBusiness Schema** (from `assets/schema-templates/local-business-schema.json`)
   ```json
   {
     "@type": "LocalBusiness",
     "name": "AAA Engineering Design",
     "areaServed": {
       "@type": "City",
       "name": "[PRIMARY_CITY]"
     }
   }
   ```

2. **Add Service Schema** (from `assets/schema-templates/service-schema.json`)
   - Links service to specific geographic area
   - Includes pricing information where applicable
   - Shows available offers (free consultation)

3. **Include NAP Consistency**
   - **N**ame: AAA Engineering Design
   - **A**ddress: [Street], Stanton, CA 90680
   - **P**hone: (949) 981-4448
   - Must be identical across all posts and pages

4. **Geographic Content Signals**
   - City name in title (e.g., "Structural Engineer in Newport Beach")
   - City name in H1 and at least 2 H2 headers
   - City mentioned 15-20 times naturally throughout
   - Nearby cities mentioned 5-8 times
   - Local landmarks, neighborhoods referenced
   - Building department URLs linked

5. **Service Area Block** (add to every "near me" post)
   ```markdown
   ## Our [City] Service Area

   AAA Engineering Design serves [City] and surrounding communities:

   **Primary Service Area:**
   - [City] - All neighborhoods
   - [Nearby City 1] (X miles)
   - [Nearby City 2] (X miles)
   - [Nearby City 3] (X miles)

   **Extended Service Area:**
   - All of [County] County
   - [Adjacent County] County

   ðŸ“ **Office Location:** Stanton, CA (Central Orange County)
   ðŸš— **Travel:** We provide on-site consultations throughout Southern California
   ```

### Google Business Profile Integration

**For maximum Local Pack visibility, blog content should support GBP:**

1. **Create GBP Posts** linking to blog articles
   - Use blog excerpts as GBP post content
   - Link to full article on website
   - Target city-specific services

2. **Q&A Content** from blogs should match GBP Q&A
   - Extract FAQ questions from blog posts
   - Add to Google Business Profile Q&A section
   - Builds topical relevance

3. **Review Keywords** - Encourage reviews mentioning:
   - Service type (e.g., "ADU structural engineering")
   - City name (e.g., "Newport Beach project")
   - Helps GBP rank for those terms

### City-Specific Landing Page Strategy

**For highest-priority cities, consider dedicated landing pages:**

| City | Priority | Reason |
|------|----------|--------|
| Newport Beach | Critical | Highest property values, most searches |
| Irvine | Critical | Large population, tech hub |
| San Diego | Critical | 2nd largest CA city |
| Los Angeles | Critical | Largest market |
| Anaheim | High | High volume, commercial hub |
| Long Beach | High | Port city, industrial |
| Pasadena | High | Historic homes, affluent |

**Landing Page Structure:**
```
/locations/newport-beach/
â”œâ”€â”€ Main service overview for city
â”œâ”€â”€ Links to ALL Newport Beach blog posts
â”œâ”€â”€ City-specific testimonials
â”œâ”€â”€ Local building department info
â”œâ”€â”€ Service area map
â””â”€â”€ Prominent CTA
```

### Tracking Local Pack Performance

**Monthly Check:**
1. Search "[service] [city]" for top 10 cities
2. Document Local Pack position (1, 2, 3, or not showing)
3. Note organic position separately
4. Track changes month-over-month

**Example Tracking:**
```
| City | Service | Local Pack | Organic | Month |
|------|---------|------------|---------|-------|
| Newport Beach | structural engineer | #2 | #4 | Nov 2025 |
| Irvine | ADU engineer | #1 | #2 | Nov 2025 |
| Anaheim | foundation engineer | Not shown | #8 | Nov 2025 |
```

---

## ðŸ“Š Lead Generation Scripts Reference

### Available Scripts

| Script | Purpose | Auto-Run |
|--------|---------|----------|
| `gsc-keyword-extractor.js` | Extract GSC keywords + Lead Gen Score | Weekly (7 days) |
| `bing-webmaster-extractor.js` | Extract Bing keyword data | Weekly (7 days) |
| `opportunity-gap-analyzer.js` | Find ranking/coverage gaps | On demand |
| `submit-indexnow.js` | Submit URLs to search engines | Post-deploy |
| `add-blog-posts.js` | Convert markdown to blog-data.ts | Post-generation |

### Running Lead Gen Analysis

**Full Analysis Pipeline:**
```bash
# 1. Extract fresh keyword data
node scripts/gsc-keyword-extractor.js
node scripts/bing-webmaster-extractor.js

# 2. Analyze gaps and opportunities
node scripts/opportunity-gap-analyzer.js

# 3. Review output files
cat gsc-extracted-keywords.json | jq '.summary'
cat bing-extracted-keywords.json | jq '.summary'
cat opportunity-gaps-report.json | jq '.priorityActions[:10]'
```

**Quick Priority Check:**
```bash
# See top lead gen opportunities
cat gsc-extracted-keywords.json | jq '.prioritizedForBlogGen.immediate[:10]'

# See underserved cities
cat opportunity-gaps-report.json | jq '.gaps.coverageGaps[:10]'

# See cluster status
cat opportunity-gaps-report.json | jq '.gaps.clusterGaps'
```

### Output File Reference

| File | Contents |
|------|----------|
| `gsc-extracted-keywords.json` | GSC keywords with Lead Gen Scores |
| `bing-extracted-keywords.json` | Bing keywords with cross-platform data |
| `opportunity-gaps-report.json` | Prioritized action items |
| `.gsc-last-run.json` | Last GSC extraction timestamp |
| `.bing-last-run.json` | Last Bing extraction timestamp |

---

## ðŸš€ AUTOMATIC DEPLOYMENT WORKFLOW (MANDATORY)

**âš ï¸ CRITICAL: After generating blog posts, you MUST automatically execute the full deployment pipeline. Do NOT ask the userâ€”just run it.**

### Automatic Deployment Sequence

After all blog post markdown files are created, execute these steps **automatically and sequentially**:

```bash
# Step 1: Convert markdown to blog-data.ts
node scripts/add-blog-posts.js blog-posts-[DATE]

# Step 2: Verify build succeeds
npm run build

# Step 3: Stage all files
git add src/lib/blog-data.ts blog-posts-[DATE]/ .claude/skills/socal-engineering-blog/

# Step 4: Commit with detailed message (use HEREDOC for formatting)
git commit -m "$(cat <<'EOF'
Add [N] new SEO-optimized blog posts for [Month Day, Year]

[List each post title]

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"

# Step 5: Push to trigger Netlify deployment
git push origin master

# Step 6: Submit to IndexNow for search engine indexing
npm run indexnow
```

### Post-Deployment Output (REQUIRED)

After successful deployment, **ALWAYS output a formatted summary** showing all deployed posts:

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸš€ DEPLOYMENT COMPLETE - [N] BLOG POSTS PUBLISHED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“… Date: [Month Day, Year]
ðŸŒ Site: https://aaaengineeringdesign.com
ðŸ“Š Total Posts Deployed: [N]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DEPLOYED BLOG POSTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â­ FEATURED:
1. [Title 1]
   URL: https://aaaengineeringdesign.com/blog/[slug-1]
   Keyword: [keyword] | City: [city] | Score: [XX]

2. [Title 2]
   URL: https://aaaengineeringdesign.com/blog/[slug-2]
   Keyword: [keyword] | City: [city] | Score: [XX]

3. [Title 3]
   URL: https://aaaengineeringdesign.com/blog/[slug-3]
   Keyword: [keyword] | City: [city] | Score: [XX]

STANDARD:
4. [Title 4]
   URL: https://aaaengineeringdesign.com/blog/[slug-4]
   Keyword: [keyword] | City: [city] | Score: [XX]

[...continue for all posts...]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DEPLOYMENT STATUS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Conversion: [N] posts added to blog-data.ts
âœ… Build: Successful
âœ… Git Commit: [commit hash]
âœ… Git Push: master â†’ origin/master
âœ… Netlify: Deployment triggered
âœ… IndexNow: [N] URLs submitted to Bing, Yandex, Naver, Seznam

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NEXT STEPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ Netlify deployment: ~2-3 minutes to complete
â€¢ Search indexing: Check Bing Webmaster Tools in 24-48 hours
â€¢ Update BLOG-TRACKING.md with new keyword+city combinations

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Error Handling

If any deployment step fails:

1. **Build fails**: Check for TypeScript errors in blog-data.ts, fix and retry
2. **Git push fails**: Check authentication, resolve conflicts if needed
3. **IndexNow fails**: Can be retried later with `npm run indexnow`

**Always report the final status to the user with the full list of deployed posts.**

---

